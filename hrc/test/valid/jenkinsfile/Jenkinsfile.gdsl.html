  0: <span class='def-Comment def-Syntax'>#!</span><span class='def-VarStrong def-Var'>groovy</span>
  1: 
  2: <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>node</span> <span class='jenkinsfile-SymbolStrong def-SymbolStrong def-Symbol'>{</span>
  3: 
  4:     <span class='def-Keyword'>def</span> saucelabsCredentialId <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>"</span><span class='def-StringEdge def-String'>"</span>
  5:     <span class='def-Keyword'>def</span> notification_recipients <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>ADDHERE@pacificwebconsutling.com</span><span class='def-StringEdge def-String'>"</span>
  6:     <span class='def-Keyword'>def</span> jira_dashboard_url <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>https://jira.com/jira/secure/Dashboard.jspa?selectPageId=777</span><span class='def-StringEdge def-String'>"</span>
  7:     <span class='def-Keyword'>def</span> testEnvironment
  8: 
  9:     env<span class='def-Symbol'>.</span>JAVA_HOME <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>/var/lib/jenkins/tools/hudson.model.JDK/JDK1.8</span><span class='def-StringEdge def-String'>"</span>
 10:     env<span class='def-Symbol'>.</span>PATH <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>"</span><span class='def-VarStrong def-Var'>${env.JAVA_HOME}</span><span class='def-String'>/bin:</span><span class='def-VarStrong def-Var'>${env.PATH}</span><span class='def-StringEdge def-String'>"</span>
 11: 
 12:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Environment?</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 13: 
 14:         <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 15:             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>timeout</span><span class='def-SymbolStrong def-Symbol'>(</span>time<span class='def-Symbol'>:</span> <span class='def-NumberDec def-Number'>60</span><span class='def-Symbol'>,</span> unit<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>SECONDS</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 16: 
 17:                 testEnvironment <span class='def-Symbol'>=</span> <span class='jenkinsfile-ConditionMethod def-InterfaceKeyword def-Keyword'>input</span><span class='def-SymbolStrong def-Symbol'>(</span>
 18:                         <span class='def-SymbolStrong def-Symbol'>[</span>
 19:                                 message   <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Environment Selection</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 20:                                 ok        <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>RUN</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 21:                                 parameters<span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>[</span>
 22:                                         choice<span class='def-SymbolStrong def-Symbol'>(</span>
 23:                                                 name<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>testEnvironment</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 24:                                                 choices<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>none</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>dev</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>test</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>stage</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>prod</span><span class='def-Comment def-Syntax'>\n</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span>
 25:                                                 description<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Please select a test environment to execute tests against</span><span class='def-StringEdge def-String'>'</span>
 26:                                         <span class='def-SymbolStrong def-Symbol'>)</span>
 27:                                 <span class='def-SymbolStrong def-Symbol'>]</span>
 28:                         <span class='def-SymbolStrong def-Symbol'>]</span>
 29:                 <span class='def-SymbolStrong def-Symbol'>)</span>
 30:             <span class='def-SymbolStrong def-Symbol'>}</span>
 31: 
 32:             <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>testEnvironment <span class='def-Symbol'>=</span><span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>none</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 33:                 <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>Invalid environment selection</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
 34:             <span class='def-SymbolStrong def-Symbol'>}</span>
 35: 
 36:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 37:             currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ABORTED - </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
 38:             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>Please restart pipeline and make selections when prompted.</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
 39:         <span class='def-SymbolStrong def-Symbol'>}</span>
 40: 
 41:         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>echo</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST ENVIRONMENT NAME: </span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-StringEdge def-String'>"</span>
 42: 
 43: 
 44:     <span class='def-SymbolStrong def-Symbol'>}</span>
 45: 
 46:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Services Available</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 47: 
 48:         <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>parallel</span><span class='def-SymbolStrong def-Symbol'>(</span>
 49:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Microservice 1</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 50:                     <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
 51:                             <span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 52:                              credentialsId   <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-user-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 53:                              passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 54:                              usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 55: 
 56:                         <span class='def-Keyword'>def</span> response <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>httpRequest</span> acceptType<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>APPLICATION_JSON</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> contentType<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>APPLICATION_JSON</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 57:                                 authentication<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-user-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 58:                                 httpMode<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>GET</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 59:                                 ignoreSslErrors<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span>
 60:                                 consoleLogResponseBody<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span>
 61:                                 url<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>https:/www.pacificwebconsulting.com/api/blah</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span>
 62:                                 validResponseCodes<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>201</span><span class='def-StringEdge def-String'>'</span>
 63: 
 64:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>echo</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>Received </span><span class='def-VarStrong def-Var'>$response</span><span class='def-String'> response</span><span class='def-StringEdge def-String'>"</span>
 65: 
 66:                     <span class='def-SymbolStrong def-Symbol'>}</span>
 67:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>,</span>
 68:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Microservice 2</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 69:                     <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
 70:                             <span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 71:                              credentialsId   <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-user-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 72:                              passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 73:                              usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 74: 
 75:                         <span class='def-Keyword'>def</span> response <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>httpRequest</span> acceptType<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>APPLICATION_JSON</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> contentType<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>APPLICATION_JSON</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 76:                                 authentication<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-user-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 77:                                 httpMode<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>GET</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 78:                                 ignoreSslErrors<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span>
 79:                                 consoleLogResponseBody<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span>
 80:                                 url<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>https://</span><span class='def-VarStrong def-Var'>${ENCRYPTED_USER}</span><span class='def-String'>:</span><span class='def-VarStrong def-Var'>${ENCRYPTED_PASSWORD}</span><span class='def-String'>@pwc-</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'>.pacificwebconsulting.com/api/info</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span>
 81:                                 validResponseCodes<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>201</span><span class='def-StringEdge def-String'>'</span>
 82: 
 83:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>echo</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>Received </span><span class='def-VarStrong def-Var'>$response</span><span class='def-String'> response</span><span class='def-StringEdge def-String'>"</span>
 84: 
 85:                     <span class='def-SymbolStrong def-Symbol'>}</span>
 86:                 <span class='def-SymbolStrong def-Symbol'>}</span>
 87:         <span class='def-SymbolStrong def-Symbol'>)</span>
 88: 
 89:     <span class='def-SymbolStrong def-Symbol'>}</span>
 90: 
 91:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Checkout</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
 92: 
 93:         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>checkout</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>                           <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>GitSCM</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
 94:                   branches                         <span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span>name<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>*/master</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-Symbol'>,</span>
 95:                   doGenerateSubmoduleConfigurations<span class='def-Symbol'>:</span> <span class='def-Keyword'>false</span><span class='def-Symbol'>,</span>
 96:                   extensions                       <span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span><span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>CleanCheckout</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-Symbol'>,</span>
 97:                   submoduleCfg                     <span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-Symbol'>,</span>
 98:                   userRemoteConfigs                <span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span>credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>service-account-here</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> url<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>GitHub project URL here .git</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span>
 99:         <span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
100: 
101:     <span class='def-SymbolStrong def-Symbol'>}</span>
102: 
103:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Verify</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
104: 
105:         <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>parallel</span><span class='def-SymbolStrong def-Symbol'>(</span>
106:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Services Available</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
107:                     <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>echo</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>All services Responsive and Available?: </span><span class='def-VarStrong def-Var'>${doDeploy}</span><span class='def-StringEdge def-String'>"</span>
108:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>,</span>
109:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Environment</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
110:                     <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>echo</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>Running tests in '</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'>' Environment</span><span class='def-StringEdge def-String'>"</span>
111:                 <span class='def-SymbolStrong def-Symbol'>}</span>
112:         <span class='def-SymbolStrong def-Symbol'>)</span>
113: 
114:     <span class='def-SymbolStrong def-Symbol'>}</span>
115: 
116:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Unit Tests</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
117: 
118:         <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
119:             withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
120:                 <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
121:                 <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
122:                     <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
123:                 <span class='def-SymbolStrong def-Symbol'>}</span>
124:             <span class='def-SymbolStrong def-Symbol'>}</span>
125: 
126:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
127:             currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UNSTABLE - </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
128:         <span class='def-SymbolStrong def-Symbol'>}</span>
129: 
130:         <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
131:                 <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
132:                 testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/surefire-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
133:         <span class='def-SymbolStrong def-Symbol'>)</span>
134: 
135:     <span class='def-SymbolStrong def-Symbol'>}</span>
136: 
137:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>xBrowser Tests</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
138:         <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>parallel</span><span class='def-SymbolStrong def-Symbol'>(</span>
139:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Chrome</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
140:                     <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
141:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-service-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
142:                                           usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
143:                                           passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
144:                                 <span class='def-SymbolStrong def-Symbol'>{</span>
145:                                     sauce<span class='def-SymbolStrong def-Symbol'>(</span>saucelabsCredentialId<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
146:                                         sauceconnect<span class='def-SymbolStrong def-Symbol'>(</span>useGeneratedTunnelIdentifier<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span> verboseLogging<span class='def-Symbol'>:</span> <span class='def-Keyword'>false</span><span class='def-SymbolStrong def-Symbol'>)</span>
147:                                                 <span class='def-SymbolStrong def-Symbol'>{</span>
148:                                                     withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
149:                                                         <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -Dskip.surefire.tests -Psingle -Dtest.name=BasicTest -Dtest.env=</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'> -Dbrowser='Chrome' -Dplatform='Windows 10' -Dbrowser.resolution='1280x1024' -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
150:                                                         <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
151:                                                             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
152:                                                         <span class='def-SymbolStrong def-Symbol'>}</span>
153:                                                     <span class='def-SymbolStrong def-Symbol'>}</span>
154:                                                 <span class='def-SymbolStrong def-Symbol'>}</span>
155:                                     <span class='def-SymbolStrong def-Symbol'>}</span>
156:                                 <span class='def-SymbolStrong def-Symbol'>}</span>
157:                     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
158:                         currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>FAILURE - </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
159:                     <span class='def-SymbolStrong def-Symbol'>}</span>
160: 
161:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
162:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
163:                             testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/failsafe-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
164:                     <span class='def-SymbolStrong def-Symbol'>)</span>
165: 
166:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
167:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span><span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>SauceOnDemandTestPublisher</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
168:                     <span class='def-SymbolStrong def-Symbol'>)</span>
169: 
170:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>,</span>
171:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Firefox</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
172:                     <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
173:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-service-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
174:                                           usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
175:                                           passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
176:                                 <span class='def-SymbolStrong def-Symbol'>{</span>
177:                                     sauce<span class='def-SymbolStrong def-Symbol'>(</span>saucelabsCredentialId<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
178:                                         sauceconnect<span class='def-SymbolStrong def-Symbol'>(</span>useGeneratedTunnelIdentifier<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span> verboseLogging<span class='def-Symbol'>:</span> <span class='def-Keyword'>false</span><span class='def-SymbolStrong def-Symbol'>)</span>
179:                                                 <span class='def-SymbolStrong def-Symbol'>{</span>
180:                                                     withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
181:                                                         <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -Dskip.surefire.tests -Psingle -Dtest.name=BasicTest -Dtest.env=</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'> -Dbrowser='Firefox' -Dplatform='Windows 7' -Dbrowser.resolution='1280x1024' -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
182:                                                         <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
183:                                                             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
184:                                                         <span class='def-SymbolStrong def-Symbol'>}</span>
185:                                                     <span class='def-SymbolStrong def-Symbol'>}</span>
186:                                                 <span class='def-SymbolStrong def-Symbol'>}</span>
187:                                     <span class='def-SymbolStrong def-Symbol'>}</span>
188:                                 <span class='def-SymbolStrong def-Symbol'>}</span>
189:                     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
190:                         currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>FAILURE - </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
191:                     <span class='def-SymbolStrong def-Symbol'>}</span>
192: 
193:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
194:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
195:                             testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/failsafe-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
196:                     <span class='def-SymbolStrong def-Symbol'>)</span>
197: 
198:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
199:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span><span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>SauceOnDemandTestPublisher</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
200:                     <span class='def-SymbolStrong def-Symbol'>)</span>
201: 
202:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>,</span>
203:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Microsoft Edge</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
204:                     <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
205:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-service-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
206:                                           usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
207:                                           passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
208:                                 <span class='def-SymbolStrong def-Symbol'>{</span>
209:                                     sauce<span class='def-SymbolStrong def-Symbol'>(</span>saucelabsCredentialId<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
210:                                         sauceconnect<span class='def-SymbolStrong def-Symbol'>(</span>useGeneratedTunnelIdentifier<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span> verboseLogging<span class='def-Symbol'>:</span> <span class='def-Keyword'>false</span><span class='def-SymbolStrong def-Symbol'>)</span>
211:                                                 <span class='def-SymbolStrong def-Symbol'>{</span>
212:                                                     withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
213:                                                         <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -Dskip.surefire.tests -Psingle -Dtest.name=BasicTest -Dtest.env=</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'> -Dbrowser='Edge' -Dplatform='Windows 10' -Dbrowser.resolution='1280x1024' -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
214:                                                         <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
215:                                                             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
216:                                                         <span class='def-SymbolStrong def-Symbol'>}</span>
217:                                                     <span class='def-SymbolStrong def-Symbol'>}</span>
218:                                                 <span class='def-SymbolStrong def-Symbol'>}</span>
219:                                     <span class='def-SymbolStrong def-Symbol'>}</span>
220:                                 <span class='def-SymbolStrong def-Symbol'>}</span>
221:                     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
222:                         currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>FAILURE = </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
223:                     <span class='def-SymbolStrong def-Symbol'>}</span>
224: 
225:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
226:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
227:                             testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/failsafe-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
228:                     <span class='def-SymbolStrong def-Symbol'>)</span>
229: 
230:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
231:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span><span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>SauceOnDemandTestPublisher</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
232:                     <span class='def-SymbolStrong def-Symbol'>)</span>
233: 
234:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>,</span>
235:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Safari</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
236:                     <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
237:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-service-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
238:                                           usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
239:                                           passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
240:                                 <span class='def-SymbolStrong def-Symbol'>{</span>
241:                                     sauce<span class='def-SymbolStrong def-Symbol'>(</span>saucelabsCredentialId<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
242:                                         sauceconnect<span class='def-SymbolStrong def-Symbol'>(</span>useGeneratedTunnelIdentifier<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span> verboseLogging<span class='def-Symbol'>:</span> <span class='def-Keyword'>false</span><span class='def-SymbolStrong def-Symbol'>)</span>
243:                                                 <span class='def-SymbolStrong def-Symbol'>{</span>
244:                                                     withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
245:                                                         <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -Dskip.surefire.tests -Psingle -Dtest.name=BasicTest -Dtest.env=</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'> -Dbrowser='Safari' -Dplatform='OSX 10.11' -Dbrowser.resolution='1024x768' -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
246:                                                         <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
247:                                                             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
248:                                                         <span class='def-SymbolStrong def-Symbol'>}</span>
249:                                                     <span class='def-SymbolStrong def-Symbol'>}</span>
250:                                                 <span class='def-SymbolStrong def-Symbol'>}</span>
251:                                     <span class='def-SymbolStrong def-Symbol'>}</span>
252:                                 <span class='def-SymbolStrong def-Symbol'>}</span>
253:                     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
254:                         currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>FAILURE = </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
255:                     <span class='def-SymbolStrong def-Symbol'>}</span>
256: 
257:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
258:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
259:                             testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/failsafe-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
260:                     <span class='def-SymbolStrong def-Symbol'>)</span>
261: 
262:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
263:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span><span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>SauceOnDemandTestPublisher</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
264:                     <span class='def-SymbolStrong def-Symbol'>)</span>
265: 
266:                 <span class='def-SymbolStrong def-Symbol'>}</span>
267:         <span class='def-SymbolStrong def-Symbol'>)</span>
268:     <span class='def-SymbolStrong def-Symbol'>}</span>
269: 
270:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Acceptance Tests</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
271: 
272:         <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>parallel</span><span class='def-SymbolStrong def-Symbol'>(</span>
273:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Browser</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
274:                     <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
275: 
276:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-service-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
277:                                           usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
278:                                           passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
279:                                 <span class='def-SymbolStrong def-Symbol'>{</span>
280:                                     sauce<span class='def-SymbolStrong def-Symbol'>(</span>saucelabsCredentialId<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
281:                                         sauceconnect<span class='def-SymbolStrong def-Symbol'>(</span>useGeneratedTunnelIdentifier<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span> verboseLogging<span class='def-Symbol'>:</span> <span class='def-Keyword'>false</span><span class='def-SymbolStrong def-Symbol'>)</span>
282:                                                 <span class='def-SymbolStrong def-Symbol'>{</span>
283:                                                     withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
284:                                                         <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -Dskip.surefire.tests -Pacceptance -Dtest.env=</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'> -Dbrowser='Chrome' -Dplatform='Windows 7' -Dbrowser.resolution='1280x1024' -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
285:                                                         <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
286:                                                             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
287:                                                         <span class='def-SymbolStrong def-Symbol'>}</span>
288:                                                     <span class='def-SymbolStrong def-Symbol'>}</span>
289:                                                 <span class='def-SymbolStrong def-Symbol'>}</span>
290:                                     <span class='def-SymbolStrong def-Symbol'>}</span>
291:                                 <span class='def-SymbolStrong def-Symbol'>}</span>
292: 
293:                     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
294:                         currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>FAILURE = </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
295:                     <span class='def-SymbolStrong def-Symbol'>}</span>
296: 
297:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
298:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
299:                             testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/failsafe-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
300:                     <span class='def-SymbolStrong def-Symbol'>)</span>
301: 
302:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
303:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span><span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>SauceOnDemandTestPublisher</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
304:                     <span class='def-SymbolStrong def-Symbol'>)</span>
305: 
306:                 <span class='def-SymbolStrong def-Symbol'>}</span><span class='def-Symbol'>,</span>
307:                 <span class='def-StringEdge def-String'>"</span><span class='def-String'>Web Services</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>:</span> <span class='def-SymbolStrong def-Symbol'>{</span>
308:                     <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
309: 
310:                         <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-service-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
311:                                           usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
312:                                           passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
313:                                 <span class='def-SymbolStrong def-Symbol'>{</span>
314: 
315:                                     withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
316:                                         <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -Dskip.surefire.tests -PwebServiceAcceptance -Dtest.env=</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'> -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
317:                                         <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
318:                                             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
319:                                         <span class='def-SymbolStrong def-Symbol'>}</span>
320:                                     <span class='def-SymbolStrong def-Symbol'>}</span>
321:                                 <span class='def-SymbolStrong def-Symbol'>}</span>
322: 
323:                     <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
324:                         currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>FAILURE - </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
325:                     <span class='def-SymbolStrong def-Symbol'>}</span>
326: 
327:                     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
328:                             <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
329:                             testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/failsafe-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
330:                     <span class='def-SymbolStrong def-Symbol'>)</span>
331: 
332:                 <span class='def-SymbolStrong def-Symbol'>}</span>
333:         <span class='def-SymbolStrong def-Symbol'>)</span>
334: 
335:     <span class='def-SymbolStrong def-Symbol'>}</span>
336: 
337:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Regression Tests</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
338: 
339:         <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
340: 
341:             <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>testEnvironment <span class='def-Symbol'>=</span><span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>prod</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
342: 
343:                 <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>echo</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>Skipping Regression Test execution in Production Environment</span><span class='def-StringEdge def-String'>"</span>
344: 
345:             <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>else</span> <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>testEnvironment <span class='def-Symbol'>!</span><span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>prod</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
346: 
347:                 <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>withCredentials</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='def-SymbolStrong def-Symbol'>[</span><span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>          <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UsernamePasswordMultiBinding</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> credentialsId<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>jenkins-service-account</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
348:                                   usernameVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_USER</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
349:                                   passwordVariable<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>ENCRYPTED_PASSWORD</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>]</span><span class='def-SymbolStrong def-Symbol'>)</span>
350:                         <span class='def-SymbolStrong def-Symbol'>{</span>
351:                             sauce<span class='def-SymbolStrong def-Symbol'>(</span>saucelabsCredentialId<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
352:                                 sauceconnect<span class='def-SymbolStrong def-Symbol'>(</span>useGeneratedTunnelIdentifier<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span><span class='def-Symbol'>,</span> verboseLogging<span class='def-Symbol'>:</span> <span class='def-Keyword'>false</span><span class='def-SymbolStrong def-Symbol'>)</span>
353:                                         <span class='def-SymbolStrong def-Symbol'>{</span>
354:                                             withMaven<span class='def-SymbolStrong def-Symbol'>(</span>jdk<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JDK_1.8</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> maven<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>Maven_3.5.0</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span> mavenSettingsConfig<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>6a7de3a5-5d21-4af6-7777-7777777</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
355:                                                 <span class='def-Keyword'>int</span> result <span class='def-Symbol'>=</span> <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>sh</span> script<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>mvn install -Dskip.surefire.tests -Pregression -Dtest.env=</span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-String'> -Dbrowser='Chrome' -Dplatform='Windows 7' -Dbrowser.resolution='1280x1024' -f pom.xml</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span> returnStatus<span class='def-Symbol'>:</span> <span class='def-Keyword'>true</span>
356:                                                 <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>result <span class='def-Symbol'>></span> <span class='def-NumberDec def-Number'>0</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
357:                                                     <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>error</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>"</span><span class='def-String'>TEST FAILURE OCCURRED</span><span class='def-StringEdge def-String'>"</span><span class='def-SymbolStrong def-Symbol'>)</span>
358:                                                 <span class='def-SymbolStrong def-Symbol'>}</span>
359:                                             <span class='def-SymbolStrong def-Symbol'>}</span>
360:                                         <span class='def-SymbolStrong def-Symbol'>}</span>
361:                             <span class='def-SymbolStrong def-Symbol'>}</span>
362: 
363:                         <span class='def-SymbolStrong def-Symbol'>}</span>
364:             <span class='def-SymbolStrong def-Symbol'>}</span>
365: 
366:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
367:             currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>FAILURE</span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
368:         <span class='def-SymbolStrong def-Symbol'>}</span>
369: 
370:         <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
371:                 <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span>     <span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>JUnitResultArchiver</span><span class='def-StringEdge def-String'>'</span><span class='def-Symbol'>,</span>
372:                 testResults<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>**/target/failsafe-reports/TEST-*.xml</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
373:         <span class='def-SymbolStrong def-Symbol'>)</span>
374: 
375:         <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>step</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-SymbolStrong def-Symbol'>[</span>
376:                 <span class='jenkinsfile-Constant def-Constant def-Keyword'>$class</span><span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>SauceOnDemandTestPublisher</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>]</span>
377:         <span class='def-SymbolStrong def-Symbol'>)</span>
378: 
379:     <span class='def-SymbolStrong def-Symbol'>}</span>
380: 
381:     <span class='jenkinsfile-MainMethod def-ClassKeyword def-Keyword'>stage</span><span class='def-SymbolStrong def-Symbol'>(</span><span class='def-StringEdge def-String'>'</span><span class='def-String'>Notify</span><span class='def-StringEdge def-String'>'</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
382: 
383:         <span class='def-Keyword'>try</span> <span class='def-SymbolStrong def-Symbol'>{</span>
384: 
385:             <span class='def-Keyword'>if</span> <span class='def-SymbolStrong def-Symbol'>(</span>currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span><span class='def-Symbol'>=</span> <span class='def-Keyword'>null</span><span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
386:                 currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>SUCCESS</span><span class='def-StringEdge def-String'>"</span>
387:             <span class='def-SymbolStrong def-Symbol'>}</span>
388: 
389:             <span class='jenkinsfile-OtherMethod def-FunctionKeyword def-Keyword'>mail</span> subject<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>Automation Test Results :: </span><span class='def-VarStrong def-Var'>${JOB_NAME}</span><span class='def-String'> :: </span><span class='def-VarStrong def-Var'>${currentBuild.result}</span><span class='def-String'>!</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span>
390:                     body<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>"</span><span class='def-String'>Pipeline: </span><span class='def-VarStrong def-Var'>${BUILD_URL}</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>Environment: </span><span class='def-VarStrong def-Var'>${testEnvironment}</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>GIT Branch: </span><span class='def-VarStrong def-Var'>${BRANCH_NAME}</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>Build #: </span><span class='def-VarStrong def-Var'>${BUILD_NUMBER}</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>Build Time: </span><span class='def-VarStrong def-Var'>${BUILD_TIMESTAMP}</span><span class='def-Comment def-Syntax'>\n</span><span class='def-String'>JIRA Story Coverage: </span><span class='def-VarStrong def-Var'>${jira_dashboard_url}</span><span class='def-StringEdge def-String'>"</span><span class='def-Symbol'>,</span>
391:                     to<span class='def-Symbol'>:</span> notification_recipients<span class='def-Symbol'>,</span>
392:                     replyTo<span class='def-Symbol'>:</span> notification_recipients<span class='def-Symbol'>,</span>
393:                     from<span class='def-Symbol'>:</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>noreply@pacificwebconsulting.com</span><span class='def-StringEdge def-String'>'</span>
394: 
395:         <span class='def-SymbolStrong def-Symbol'>}</span> <span class='def-Keyword'>catch</span> <span class='def-SymbolStrong def-Symbol'>(</span>err<span class='def-SymbolStrong def-Symbol'>)</span> <span class='def-SymbolStrong def-Symbol'>{</span>
396:             currentBuild<span class='def-Symbol'>.</span>result <span class='def-Symbol'>=</span> <span class='def-StringEdge def-String'>'</span><span class='def-String'>UNSTABLE - </span><span class='def-StringEdge def-String'>'</span> <span class='def-Symbol'>+</span> err
397:         <span class='def-SymbolStrong def-Symbol'>}</span>
398: 
399:     <span class='def-SymbolStrong def-Symbol'>}</span>
400: 
401: <span class='jenkinsfile-SymbolStrong def-SymbolStrong def-Symbol'>}</span>
402: 
